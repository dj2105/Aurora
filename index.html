<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="/Aurora/" />
    <title>Aurora Trip Reference</title>
    <meta name="theme-color" content="#000000" />
    <meta name="google-maps-key" content="" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="print.css" media="print" />
  </head>
  <body>
    <div class="trip-hud" id="trip-hud" data-lat="65.845" data-lon="24.187">
      <section class="trip-hud__status" aria-label="Trip status bar">
        <div class="hud-times">
          <div class="hud-time">
            <span class="hud-label">Finland</span>
            <span class="hud-value" data-role="time-fi">--:--</span>
          </div>
          <div class="hud-time">
            <span class="hud-label">Ireland</span>
            <span class="hud-value" data-role="time-ie">--:--</span>
          </div>
        </div>
        <div class="hud-hero" aria-live="polite">
          <div class="hud-hero__header">
            <div>
              <p class="hud-hero__label">Tonight in Tornio</p>
            </div>
          </div>
          <div class="hud-hero__grid">
            <div class="hud-hero__group">
              <div class="hud-hero__stat">
                <p class="hud-hero__value" data-role="tonight-temp-low">--</p>
                <p class="hud-hero__meta" data-role="tonight-temp-low-time"></p>
              </div>
              <div class="hud-hero__stat">
                <p class="hud-hero__value" data-role="tonight-temp-high">--</p>
                <p class="hud-hero__meta" data-role="tonight-temp-high-time"></p>
              </div>
            </div>
            <div class="hud-hero__group">
              <div class="hud-hero__stat">
                <p class="hud-hero__value" data-role="tonight-cloud-avg">--</p>
                <p class="hud-hero__meta" data-role="tonight-cloud-avg-label">avg</p>
              </div>
              <div class="hud-hero__stat">
                <p class="hud-hero__value" data-role="tonight-cloud-best">--</p>
                <p class="hud-hero__meta" data-role="tonight-cloud-best-time"></p>
              </div>
            </div>
            <div class="hud-hero__stat hud-hero__stat--solo">
              <p class="hud-hero__value" data-role="tonight-kp-max">--</p>
              <p class="hud-hero__meta" data-role="tonight-kp-max-time"></p>
            </div>
          </div>
        </div>
        <p class="hud-status" data-role="hud-status"></p>
      </section>
      <nav class="day-nav" aria-label="Trip days">
        <div class="day-nav__scroll" id="timeline"></div>
      </nav>
    </div>

    <main class="page">
      <section class="hero tab-section" data-tab-section="home">
        <div class="hero-card street-view-card">
          <div class="street-view__header">
            <div>
              <p class="street-view__eyebrow">Street View</p>
              <h2>Night drive spot check</h2>
            </div>
            <button class="street-view__shuffle" type="button" id="street-view-shuffle" aria-label="Shuffle Street View">
              üîÄ
            </button>
          </div>
          <div class="street-view__frame" id="street-view-frame">
            <div class="street-view__fallback" id="street-view-fallback" hidden>
              <p>Street View needs a Google Maps key.</p>
            </div>
          </div>
          <p class="street-view__meta" id="street-view-meta"></p>
        </div>
        <div class="day-carousel" aria-label="Daily schedule carousel" id="day-carousel">
          <div class="day-carousel__track" id="day-carousel-track"></div>
        </div>
      </section>

      <section class="section tab-section" data-tab-section="bookings" id="bookings" aria-label="Bookings">
        <header class="section-header">
          <h2>Bookings</h2>
          <p>Travel + accommodation details in date order.</p>
        </header>
        <div class="booking-list" id="bookings-list"></div>
      </section>

      <section class="section tab-section" data-tab-section="thingys" id="thingys" aria-label="Thingys">
        <header class="section-header">
          <h2>Thingys</h2>
          <p>Equipment, belongings, and clothes in one checklist.</p>
        </header>
        <div class="thingys-summary" id="thingys-summary"></div>
        <div class="thingys-list" id="thingys-list"></div>
        <form class="thingys-add" id="thingys-add">
          <label>
            <span class="sr-only">Item</span>
            <input id="thingys-input" type="text" placeholder="Add item" required />
          </label>
          <label>
            <span class="sr-only">Category</span>
            <input id="thingys-category" type="text" list="thingys-categories" placeholder="Category" required />
            <datalist id="thingys-categories"></datalist>
          </label>
          <button class="pill" type="submit">+ item</button>
        </form>
      </section>

      <section class="section tab-section" data-tab-section="tools" id="tools" aria-label="Tools">
        <div class="card tools-card">
          <h2>Tools</h2>
          <p class="meta">More tools coming soon.</p>
        </div>
      </section>

      <section class="section tab-section" data-tab-section="settings" id="sync" aria-label="Settings">
        <header class="section-header">
          <h2>Settings</h2>
          <p>Sync + accessibility controls in one place.</p>
        </header>
        <div class="sync-card">
          <div class="sync-row">
            <label class="sync-toggle" for="sync-toggle">
              <input id="sync-toggle" type="checkbox" />
              <span>Sync across devices</span>
            </label>
            <button class="sync-status" id="sync-status" type="button">Offline</button>
          </div>
          <div class="sync-row sync-row--ui">
            <label class="sync-toggle" for="big-text-toggle">
              <input id="big-text-toggle" type="checkbox" />
              <span class="sync-toggle__label">
                <span class="sync-toggle__icon" aria-hidden="true">A A</span>
                Large text
              </span>
            </label>
          </div>
          <div class="sync-fields">
            <label class="sync-field">
              <span>Trip code</span>
              <input id="sync-trip-code" type="text" maxlength="10" placeholder="ABC123" />
            </label>
            <label class="sync-field">
              <span>Join token</span>
              <input id="sync-join-token" type="text" maxlength="10" placeholder="Token" />
            </label>
          </div>
          <div class="sync-actions">
            <button class="pill" id="sync-create" type="button">Create new trip code</button>
            <button class="pill" id="sync-join" type="button">Join trip</button>
            <button class="pill" id="sync-copy" type="button">Copy trip code</button>
            <button class="pill" id="sync-disconnect" type="button">Disconnect</button>
          </div>
          <div class="sync-meta">
            <p class="meta">Join token for this trip</p>
            <div class="sync-token">
              <span id="sync-join-token-value">‚Äî</span>
              <button class="pill" id="sync-join-token-reveal" type="button">Show join token</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div class="modal" id="event-detail-modal" role="dialog" aria-modal="true" aria-labelledby="event-detail-title" hidden>
      <div class="modal__panel">
        <div class="modal__header">
          <h2 id="event-detail-title">Event details</h2>
          <button class="modal__close" id="event-detail-close" type="button" aria-label="Close event detail">
            ‚úï
          </button>
        </div>
        <div class="event-detail" id="event-detail-body"></div>
      </div>
    </div>

    <div class="modal" id="copy-sheet-modal" role="dialog" aria-modal="true" aria-labelledby="copy-sheet-title" hidden>
      <div class="modal__panel">
        <div class="modal__header">
          <h2 id="copy-sheet-title">Copy details</h2>
          <button class="modal__close" id="copy-sheet-close" type="button" aria-label="Close copy sheet">
            ‚úï
          </button>
        </div>
        <p class="meta" id="copy-sheet-subtitle"></p>
        <div class="copy-sheet__list" id="copy-sheet-list"></div>
        <form class="copy-sheet__form" id="copy-sheet-form">
          <label>
            <span>Label</span>
            <input id="copy-sheet-label" type="text" required />
          </label>
          <label>
            <span>Text</span>
            <input id="copy-sheet-text" type="text" required />
          </label>
          <button class="pill" type="submit" id="copy-sheet-submit">Add phrase</button>
          <button class="pill" type="button" id="copy-sheet-cancel" hidden>Cancel edit</button>
        </form>
      </div>
    </div>

    <div class="modal" id="add-item-modal" role="dialog" aria-modal="true" aria-labelledby="add-item-title" hidden>
      <div class="modal__panel">
        <div class="modal__header">
          <h2 id="add-item-title">Add event</h2>
          <button class="modal__close" id="add-item-close" type="button" aria-label="Close add event">
            ‚úï
          </button>
        </div>
        <p class="meta">Add a new event without editing the trip file.</p>
        <form class="add-item" id="user-item-form">
          <label>
            <span>Day</span>
            <select id="user-item-day" name="day" required></select>
          </label>
          <label>
            <span>Time (optional)</span>
            <input id="user-item-time" name="time" type="time" />
          </label>
          <label>
            <span>Title</span>
            <input id="user-item-title" name="title" type="text" required />
          </label>
          <label>
            <span>Detail (optional)</span>
            <input id="user-item-detail" name="detail" type="text" />
          </label>
          <label>
            <span>Type</span>
            <select id="user-item-type" name="type">
              <option value="">Pick type (optional)</option>
              <option value="transport">Transport</option>
              <option value="food">Food</option>
              <option value="activity">Activity</option>
              <option value="logistics">Logistics</option>
              <option value="note">Note</option>
            </select>
          </label>
          <button class="pill" type="submit">Add event</button>
        </form>
      </div>
    </div>

    <nav class="bottom-nav" aria-label="Primary">
      <button class="bottom-nav__button" type="button" data-tab="bookings">
        <span class="bottom-nav__icon" aria-hidden="true">üß≥</span>
        <span class="bottom-nav__label">Bookings</span>
      </button>
      <button class="bottom-nav__button" type="button" data-tab="thingys">
        <span class="bottom-nav__icon" aria-hidden="true">‚úÖ</span>
        <span class="bottom-nav__label">Thingys</span>
      </button>
      <button class="bottom-nav__button" type="button" data-tab="tools">
        <span class="bottom-nav__icon" aria-hidden="true">üß∞</span>
        <span class="bottom-nav__label">Tools</span>
      </button>
      <button class="bottom-nav__button" type="button" data-tab="settings">
        <span class="bottom-nav__icon" aria-hidden="true">‚öôÔ∏è</span>
        <span class="bottom-nav__label">Settings</span>
      </button>
    </nav>

    <div class="install-toast" id="install-toast" role="status" aria-live="polite" hidden></div>
    <div class="offline-toast" id="offline-toast" role="status" aria-live="polite" hidden></div>
    <div class="update-toast" id="update-toast" role="status" aria-live="polite" hidden></div>
    <div class="action-toast" id="action-toast" role="status" aria-live="polite" hidden></div>

    <script src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="assets/js/sync.js"></script>
    <script type="module" src="assets/js/trip-hud.js"></script>
    <script type="module" src="assets/js/street-view.js"></script>
    <script type="module" src="assets/js/pwa.js"></script>
  </body>
</html>
