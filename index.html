<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <base href="/Aurora/" />
    <title>Aurora Trip Reference</title>
    <meta name="theme-color" content="#0f2f33" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="assets/css/aurora-dashboard.css" />
    <link rel="stylesheet" href="print.css" media="print" />
  </head>
  <body>
    <div
      class="trip-hud"
      id="trip-hud"
      data-lat="65.845"
      data-lon="24.187"
      data-base-map="https://www.google.com/maps/search/?api=1&query=1409+Jokivarrentie+Tornio+Finland"
      data-accommodation="1409 Jokivarrentie, 95520 Tornio, Finland"
      data-supermarket-map="https://www.google.com/maps/search/?api=1&query=K-Citymarket+Tornio"
      data-aurora-anchor="#best-chance"
    >
      <section class="trip-hud__status" aria-label="Trip status bar">
        <div class="hud-times">
          <div class="hud-time">
            <span class="hud-label">Finland</span>
            <span class="hud-value" data-role="time-fi">--:--</span>
          </div>
          <div class="hud-time">
            <span class="hud-label">Ireland</span>
            <span class="hud-value" data-role="time-ie">--:--</span>
          </div>
        </div>
        <div class="hud-chips" role="list">
          <button class="hud-chip" type="button" data-role="weather-now">Weather --</button>
          <button class="hud-chip" type="button" data-role="cloud-tonight">Tonight --</button>
          <button class="hud-chip" type="button" data-role="aurora-now">Kp --</button>
          <button class="hud-chip hud-chip--accent" type="button" data-role="aurora-score">Aurora --</button>
        </div>
        <div class="hud-actions" role="group" aria-label="Quick actions">
          <a class="hud-action" data-action="maps" href="#" target="_blank" rel="noreferrer">
            <span class="hud-action__icon" aria-hidden="true">üó∫Ô∏è</span>
            <span class="hud-action__label">Maps</span>
          </a>
          <button class="hud-action" type="button" data-action="copy">
            <span class="hud-action__icon" aria-hidden="true">üè†</span>
            <span class="hud-action__label">Stay</span>
          </button>
          <a class="hud-action" data-action="supermarket" href="#" target="_blank" rel="noreferrer">
            <span class="hud-action__icon" aria-hidden="true">üõí</span>
            <span class="hud-action__label">Market</span>
          </a>
          <a class="hud-action" data-action="best-chance" href="#">
            <span class="hud-action__icon" aria-hidden="true">‚ú®</span>
            <span class="hud-action__label">Aurora</span>
          </a>
        </div>
        <p class="hud-status" data-role="hud-status"></p>
      </section>
      <nav class="day-nav" aria-label="Trip days">
        <div class="day-nav__scroll" id="timeline"></div>
        <button class="day-nav__today" id="jump-today" type="button">Jump to today</button>
      </nav>
    </div>

    <main class="page">
      <section class="hero">
        <div class="hero-card">
          <h1>Aurora Trip Reference</h1>
          <p class="hero-subtitle">Fast, offline-friendly details for daily plans, maps, and aurora checks.</p>
          <div class="hero-actions">
            <a class="pill" href="#days">Plan</a>
            <a class="pill" href="#maps">Maps</a>
            <a class="pill" href="#checklist">Checklist</a>
            <button class="pill" type="button" id="share-trip">Share trip</button>
            <button class="pill" type="button" id="print-trip">Print / Save PDF</button>
          </div>
        </div>
        <div class="hero-card now-next" aria-live="polite">
          <h2>Now / Next</h2>
          <div class="now-next__grid">
            <div>
              <p class="label">Local time</p>
              <p class="value" id="current-time">--:--</p>
            </div>
            <div>
              <p class="label">Location</p>
              <p class="value" id="current-location">Tornio</p>
            </div>
          </div>
          <div class="next-card">
            <p class="label">Next up</p>
            <p class="value" id="next-title">Loading‚Ä¶</p>
            <p class="meta" id="next-meta"></p>
          </div>
          <div class="zone-toggle" role="group" aria-label="Time zone display">
            <button type="button" class="zone-toggle__button is-active" data-zone="local">Local</button>
            <button type="button" class="zone-toggle__button" data-zone="home">Home</button>
            <button type="button" class="zone-toggle__button" data-zone="both">Both</button>
          </div>
        </div>
      </section>

      <section class="section" id="sync" aria-label="Sync across devices">
        <header class="section-header">
          <h2>Sync across devices</h2>
          <p>Optional Firestore sync for gear, pills, checklist, and notes. Local storage stays the default.</p>
        </header>
        <div class="sync-card">
          <div class="sync-row">
            <label class="sync-toggle" for="sync-toggle">
              <input id="sync-toggle" type="checkbox" />
              <span>Sync across devices</span>
            </label>
            <button class="sync-status" id="sync-status" type="button">Offline</button>
          </div>
          <div class="sync-fields">
            <label class="sync-field">
              <span>Trip code</span>
              <input id="sync-trip-code" type="text" maxlength="10" placeholder="ABC123" />
            </label>
            <label class="sync-field">
              <span>Join token</span>
              <input id="sync-join-token" type="text" maxlength="10" placeholder="Token" />
            </label>
          </div>
          <div class="sync-actions">
            <button class="pill" id="sync-create" type="button">Create new trip code</button>
            <button class="pill" id="sync-join" type="button">Join trip</button>
            <button class="pill" id="sync-copy" type="button">Copy trip code</button>
            <button class="pill" id="sync-disconnect" type="button">Disconnect</button>
          </div>
          <div class="sync-meta">
            <p class="meta">Join token for this trip</p>
            <div class="sync-token">
              <span id="sync-join-token-value">‚Äî</span>
              <button class="pill" id="sync-join-token-reveal" type="button">Show join token</button>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="key-info" aria-label="Key info">
        <header class="section-header">
          <h2>Key info</h2>
          <p>Quick reference for check-in details, trains, and daily pills.</p>
        </header>
        <div class="grid key-info-grid">
          <div class="card key-info-card" id="key-info-card">
            <h3>Key Info</h3>
            <div class="key-info__content" id="key-info-content"></div>
          </div>
          <div class="card pills-panel" id="pills-panel">
            <h3>Pills today</h3>
            <p class="meta" id="pills-today-date"></p>
            <div class="pills-status" id="pills-today-status"></div>
            <div class="pills-actions">
              <button class="pill" type="button" data-pill-reset="today">Reset today</button>
              <button class="pill" type="button" data-pill-reset="all">Reset all</button>
            </div>
          </div>
        </div>
      </section>

      <section class="section" aria-label="Search">
        <label class="search" for="search">
          <span>Search</span>
          <input id="search" type="search" placeholder="Search events, bookings, addresses" />
        </label>
        <div id="alerts" class="alerts"></div>
        <div class="notes-inbox" id="notes-inbox" aria-live="polite">
          <div class="notes-inbox__header">
            <h3>Notes Inbox</h3>
            <p class="meta">Quick notes with no specific day.</p>
          </div>
          <div class="notes-inbox__list" id="notes-inbox-list"></div>
        </div>
      </section>

      <section class="section" id="add-item" aria-label="Add trip item">
        <header class="section-header">
          <h2>Add item</h2>
          <p>Add a new event or note without editing the trip file.</p>
        </header>
        <form class="add-item" id="user-item-form">
          <label>
            <span>Day</span>
            <select id="user-item-day" name="day">
              <option value="">No specific day</option>
            </select>
          </label>
          <label>
            <span>Time (optional)</span>
            <input id="user-item-time" name="time" type="time" />
          </label>
          <label>
            <span>Title</span>
            <input id="user-item-title" name="title" type="text" required />
          </label>
          <label>
            <span>Detail (optional)</span>
            <input id="user-item-detail" name="detail" type="text" />
          </label>
          <label>
            <span>Type</span>
            <select id="user-item-type" name="type">
              <option value="">Pick type (optional)</option>
              <option value="transport">Transport</option>
              <option value="food">Food</option>
              <option value="activity">Activity</option>
              <option value="logistics">Logistics</option>
              <option value="note">Note</option>
            </select>
          </label>
          <button class="pill" type="submit">Add</button>
        </form>
      </section>

      <section class="section" id="outing-gear" aria-label="Outing gear checklist">
        <header class="section-header">
          <h2>Outing Gear Checklist</h2>
          <p>Before stepping outside, tap Daniel or Jaime to confirm gear.</p>
          <div class="section-actions">
            <button class="pill" type="button" data-gear-reset="all">Reset all</button>
            <button class="pill" type="button" data-gear-reset="daniel">Reset Daniel</button>
            <button class="pill" type="button" data-gear-reset="jaime">Reset Jaime</button>
          </div>
        </header>
        <form class="outing-gear__add" id="outing-gear-add">
          <label>
            <span class="sr-only">Add outing item</span>
            <input id="outing-gear-input" type="text" placeholder="Add item" />
          </label>
          <button class="pill" type="submit">Add item</button>
        </form>
        <div class="outing-gear__counts" aria-live="polite">
          <span id="outing-gear-count-daniel">Daniel 0/0</span>
          <span id="outing-gear-count-jaime">Jaime 0/0</span>
        </div>
        <div class="outing-gear__table" role="table" aria-label="Outing gear checklist table">
          <div class="outing-gear__row outing-gear__row--header" role="row">
            <span role="columnheader">Item</span>
            <span role="columnheader">Daniel</span>
            <span role="columnheader">Jaime</span>
          </div>
          <div class="outing-gear__body" id="outing-gear-body"></div>
        </div>
      </section>

      <section class="section" id="today" aria-label="Today plan">
        <header class="section-header">
          <h2>Today</h2>
          <p>Fast access to the next steps, maps, and today‚Äôs highlights.</p>
        </header>
        <div class="today-card" id="today-card">
          <div class="today-card__header">
            <div>
              <p class="label">Date</p>
              <p class="value" id="today-date">--</p>
            </div>
            <div>
              <p class="label">Location</p>
              <p class="value" id="today-location">--</p>
            </div>
          </div>
          <div>
            <p class="label">Next up</p>
            <ul class="today-card__list" id="today-events"></ul>
          </div>
          <div class="today-card__actions">
            <button class="pill" type="button" id="today-jump">Jump to today</button>
            <a class="pill" id="today-map" href="#" target="_blank" rel="noreferrer">Open Base Map</a>
            <a class="pill" id="today-supermarket" href="#" target="_blank" rel="noreferrer">Open Supermarket</a>
          </div>
        </div>
      </section>

      <section class="section" id="days" aria-label="Trip days">
        <header class="section-header">
          <h2>Daily plan</h2>
          <p>Tap a day chip above to jump to that section.</p>
        </header>
        <div class="day-list" id="days-list"></div>
      </section>

      <section class="section" id="best-chance" aria-label="Best aurora chance">
        <header class="section-header">
          <h2>Best chance tonight</h2>
          <p>Check cloud cover first. If clear, step outside hourly.</p>
        </header>
        <div class="live-dashboard" data-day="2026-01-21"></div>
      </section>

      <section class="section" id="bookings" aria-label="Bookings and documents">
        <header class="section-header">
          <h2>Bookings</h2>
          <p>Quick references for transport, stays, and confirmations.</p>
        </header>
        <div class="grid" id="bookings-grid"></div>
      </section>

      <section class="section" id="maps" aria-label="Maps hub">
        <header class="section-header">
          <h2>Maps</h2>
          <p>Open each location in Google Maps in one tap.</p>
        </header>
        <div class="grid" id="maps-grid"></div>
      </section>

      <section class="section" id="checklist" aria-label="Checklist">
        <header class="section-header">
          <h2>Checklist</h2>
          <p>Tap to tick off items. Saved locally for offline use.</p>
          <div class="section-actions">
            <button class="pill" type="button" id="export-checklist">Export checklist</button>
            <button class="pill" type="button" id="import-checklist">Import checklist</button>
            <input type="file" id="import-checklist-input" accept="application/json" hidden />
          </div>
          <p class="section-note" id="checklist-note" role="status" aria-live="polite"></p>
        </header>
        <div class="checklist" id="checklist-sections"></div>
      </section>

      <section class="section" id="emergency" aria-label="Emergency info">
        <header class="section-header">
          <h2>Emergency & Practical</h2>
          <p>Copy-ready essentials for local services and accommodation.</p>
        </header>
        <div class="grid emergency-grid">
          <div class="card">
            <h3>Emergency (Finland)</h3>
            <p class="meta">112 for urgent assistance.</p>
          </div>
          <div class="card">
            <h3>Accommodation address</h3>
            <p class="meta">1409 Jokivarrentie, 95520 Tornio, Finland</p>
          </div>
          <div class="card">
            <h3>Taxi</h3>
            <p class="meta">Call local dispatcher or use a ride app.</p>
          </div>
        </div>
      </section>
    </main>

    <div class="install-toast" id="install-toast" role="status" aria-live="polite" hidden></div>
    <div class="offline-toast" id="offline-toast" role="status" aria-live="polite" hidden></div>
    <div class="update-toast" id="update-toast" role="status" aria-live="polite" hidden></div>
    <div class="action-toast" id="action-toast" role="status" aria-live="polite" hidden></div>
    <button class="back-to-top" id="back-to-top" type="button" aria-label="Back to top" hidden>
      Back to top
    </button>

    <script src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="assets/js/sync.js"></script>
    <script type="module" src="assets/js/aurora-dashboard.js"></script>
    <script type="module" src="assets/js/trip-hud.js"></script>
    <script type="module" src="assets/js/pwa.js"></script>
  </body>
</html>
